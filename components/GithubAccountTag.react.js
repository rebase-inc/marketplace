import React, { Component, PropTypes } from 'react';
import ReactDOM from 'react-dom';

import { GithubLogo } from './Icons.react';

export default class GithubAccountTag extends Component {
    constructor(props, context) {
        super(props, context);
        this.componentDidMount = this.componentDidMount.bind(this);
        this.state = { width: 150 };
    }

    componentDidMount() {
        const node = ReactDOM.findDOMNode(this.refs.text);
        this.setState({ width: node.offsetWidth + 45 });
    }

    render() {
        let { user, url } = this.props.account;
        let { width } = this.state;
        return (
            <svg className='githubAccountTag' onClick={() => window.open(url)} height='30px' width={ width + 'px' }>
                <rect fill='#5D7591' height='30px' width='100%' rx='4px' ry='4px'/>
                <g stroke="none" fill="#F5F7FA" transform='translate(-2,-5)'>
                    <path d="M18.3025535,8 C11.5092599,8 6,13.5085046 6,20.3040642 C6,25.7400586 9.52505018,30.3512503 14.4141973,31.9781965 C15.0297782,32.0914936 15.2541065,31.7115707 15.2541065,31.385275 C15.2541065,31.0929686 15.2435321,30.3195271 15.2374895,29.2930554 C11.8151621,30.0362843 11.0930819,27.6434498 11.0930819,27.6434498 C10.5333943,26.2219489 9.726719,25.8435366 9.726719,25.8435366 C8.60960968,25.0806696 9.81131417,25.0957758 9.81131417,25.0957758 C11.0462525,25.1826369 11.6958225,26.3639479 11.6958225,26.3639479 C12.7932936,28.2439244 14.5758345,27.7008536 15.2767659,27.3858877 C15.3885523,26.5912974 15.7065395,26.048982 16.0577605,25.7415693 C13.32579,25.4311352 10.453331,24.3752063 10.453331,19.6605367 C10.453331,18.3175885 10.9329554,17.2186067 11.7199925,16.3590594 C11.5930998,16.0478701 11.1708793,14.7963149 11.8408427,13.102901 C11.8408427,13.102901 12.8733569,12.7720735 15.2238939,14.3642753 C16.2050467,14.0908517 17.2579543,13.9548951 18.3040642,13.9496079 C19.3494187,13.9548951 20.401571,14.0908517 21.3842344,14.3642753 C23.7332608,12.7720735 24.7642643,13.102901 24.7642643,13.102901 C25.4357384,14.7963149 25.0135179,16.0478701 24.8873805,16.3590594 C25.6759283,17.2186067 26.1517761,18.3175885 26.1517761,19.6605367 C26.1517761,24.3872913 23.2747852,25.4273587 20.5345062,25.7317502 C20.9756096,26.1116731 21.3691282,26.8624551 21.3691282,28.009777 C21.3691282,29.6548508 21.3540219,30.9819374 21.3540219,31.385275 C21.3540219,31.7145919 21.5760842,32.0975361 22.1999735,31.9774412 C27.0853441,30.3467184 30.607373,25.738548 30.607373,20.3040642 C30.607373,13.5085046 25.0981131,8 18.3025535,8"></path>
                </g>
                <text ref='text' transform='translate(35, 20)' fill='#F5F7FA'>{user}</text>
            </svg>
        );
    }
};
